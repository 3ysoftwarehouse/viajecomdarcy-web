{% extends "default/panel/layout.html" %} 
{% load staticfiles %} 
{% block page_info %}
    <li>
        <b>Reserva</b>
    </li>
    <li>
        <a class="active">Cadastro</a>
    </li>
{% endblock %} 
{% block content %} 
{% if context %} 
    {% for title, value in context.items %} 
        {{title}} : {{value}}
        <br> 
    {% endfor %} 
{% endif %}
<div id="rootwizard">
    <!-- Nav tabs -->
    <ul class="nav nav-tabs nav-tabs-linetriangle nav-tabs-separator nav-stack-sm">
        <li class="active">
            <a data-toggle="tab" href="#tab1"><i class="fa fa-bars tab-icon"></i>
                <span>
                    Reserva
                </span>
            </a>
        </li>
    </ul>
    <!-- Tab panes -->
    <form autocomplete="off" method="post" enctype="multipart/form-data" role="form" id="form-personal" novalidate="novalidate">
        {% csrf_token %}
        <div class="tab-content">
            <div class="tab-pane active slide-left" id="tab1">
                <div class="row row-same-height">
                    <div class="col-md-12">

                        <div class="padding-10">
                            <div class="row clearfix p-t-10">
                                <div class="col-sm-6">
                                    <div class="form-group  required">
                                        <label>Cliente</label>
                                        <input name="id_cliente" value="{{reservapassageiro.id_reserva.id_cliente}}" id="id_cliente" class="form-control" disabled/>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group  required">
                                        <label>Passageiro</label>
                                        <input name="id_passageiro" value="{{reservapassageiro.id_passageiro}}" id="id_passageiro" class="form-control" disabled/>
                                    </div>
                                </div>                              
                            </div>
                        </div>
                        
                        <div class="padding-10">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Excursão:</label>
                                        {{ form.id_excursao }}
                                        <input type="text" value="true" class="hidden" id="edit-reserva" />
                                        <small class="text-muted">{{ form.id_excursao.errors }}</small>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Pacote:</label>
                                        {{ form.id_pacote }}
                                        <small class="text-muted">{{ form.id_pacote.errors }}</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Acomodação:</label>
                                        {{ form.id_acomodacao_pacote }}
                                        <small class="text-muted">{{ form.id_acomodacao_pacote.errors }}</small>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Preço Acomodação:</label>
                                        {{ form.preco_acomodacao }}
                                        <small class="text-muted">{{ form.preco_acomodacao.errors }}</small>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Taxa:</label>
                                        {{ form.reserva_passageiro_preco }}
                                        <small class="text-muted">{{ form.reserva_passageiro_preco.errors }}</small>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Moeda:</label>
                                        <div style="display:none;">
                                            {{ form.id_moeda }}
                                        </div>
                                        {% if reservapassageiro.id_moeda %}
                                            <input class="form-control" type="text" id="moeda_text" name="moeda_text" value="{{reservapassageiro.id_moeda}}" disabled/>
                                        {% else %}
                                            <input class="form-control" type="text" id="moeda_text" name="moeda_text" value="" disabled/>
                                        {% endif %}
                                        <small class="text-muted">{{ form.id_moeda.errors }}</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Cambio:</label>
                                        {{ form.reserva_passageiro_cambio  }}
                                        <small class="text-muted">{{ form.reserva_passageiro_cambio.errors }}</small>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Desconto:</label>
                                        {{ form.desconto }}
                                        <small class="text-muted">{{ form.desconto.errors }}</small>
                                    </div>
                                </div> 
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Registro Interno:</label>
                                        {{ form.registro_interno }}
                                        <small class="text-muted">{{ form.registro_interno.errors }}</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group " value="">
                                        <label for="id_valor_pago" class="">Obs:</label>
                                        {{ form.reserva_passageiro_obs }}
                                        <small class="text-muted">{{ form.reserva_passageiro_obs.errors }}</small>
                                    </div>
                                </div> 
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="panel panel-default clearfix">
                                        <div class="col-sm-12" id="divDetalhes">
                                            {% include 'venda/reserva/reservas_snippet-novo.html'%}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="padding-10">
                            <div class="row">
                              <div class="col-lg-12">
                                <div class="form-group">
                                  <button type="submit" class="btn btn-success btn-cons">
                                    Salvar
                                  </button>
                                  {% if reservapassageiro.id_reserva.editou %}
                                    <a class="btn btn-md btn-primary" href="/framework/dashboard/reserva/gerar_recibo/{{ reservapassageiro.id_reserva.pk }}">
                                        <i class="fa fa-file-pdf-o"></i>
                                        Gerar Recibo
                                    </a>
                                  {% endif %}
                                  <div class="pull-right">
                                    <a class="btn btn-secondary-outline" href="{% url 'reserva-list' %}">
                                        Cancelar
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </div>
                        </div>

                    </div>                    
                </div>
            </div>
        </div>
    </form>
    {% include 'venda/reserva/modal_opcional_register-novo.html' %}
</div>
{% endblock %} 
{% block javascript %}
    <script src="{% static 'js/default/jquery.inputmask.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/default/form_wizard.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/default/jquery.bootstrap.wizard.min.js' %}" type="text/javascript">
    </script>
    <script src="{% static 'js/default/bootstrap-datepicker.js' %}" type="text/javascript"></script>
    <script>
        $(document).ready(function() {
            $(function() {
                $('.delete-row').prepend('<i class="fs-14 pg-minus"></i> ')
                $('.add-row').prepend('<i class="fs-14 pg-plus"></i> ')
                $(".add-row").click(function(){
                    $('.delete-row').each(function (index, value) { 
                        if(typeof ($(this).children().attr('class')) === 'undefined'){
                            $(this).prepend('<i class="fs-14 pg-minus"></i> ')
                        }
                    });
                });
            });
        });
        $(".finish").click(function() {
            $("#form-personal").submit();
        });
    </script>
    <script src="{% static 'js/default/jquery.validate.min.js' %}"></script>
    <script>
        url = "{% url 'add-passageiro' request.resolver_match.kwargs.pk %}";
        url_edit = "{% url 'edit-passageiro' %}";
        url_opcional = "{% url 'add-opcional' request.resolver_match.kwargs.pk %}";
        url_finalizar = "/en/framework/dashboard/finalizaragendamento/";
        id_reserva = "{{ reservapassageiro.id_reserva.pk }}";
        id_passageiro = "{{ reservapassageiro.id_passageiro.pk }}";
        url_list = "{% url 'reserva-list' %}";
    </script>
    <script src="{% static 'js/venda/custom.js' %}" type="text/javascript"></script>
{% endblock %}
